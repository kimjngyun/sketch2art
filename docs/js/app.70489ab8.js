(function(t){function e(e){for(var n,i,o=e[0],c=e[1],u=e[2],h=0,p=[];h<o.length;h++)i=o[h],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/sketch2art/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"1ab8":function(t,e,a){"use strict";a("cbeb")},"4ef8":function(t,e,a){"use strict";a("8f1b")},5069:function(t,e,a){t.exports=a.p+"img/cat.1f801deb.jpeg"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=a("8c4f"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"APP"}},[a("Nav"),a("v-main",[a("router-view")],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",[a("v-app-bar",{attrs:{flat:"",app:""}},[a("v-toolbar-title",{staticClass:"text-uppercas grey--text"},[a("v-btn",{staticClass:"font-weight-light",attrs:{text:"",elevation:"0"},on:{click:t.index}},[a("span",[t._v("Sketch2Art")])])],1),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"black",elevation:"0"},on:{click:t.sketcher}},[a("span",[t._v("Sketchbook")])]),a("v-btn",{attrs:{text:"",color:"black",elevation:"0"},on:{click:t.gallery}},[a("span",[t._v("Gallery")])]),a("v-btn",{attrs:{text:"",color:"black",href:"https://github.com/sketch2art",elevation:"0"}},[a("span",[t._v("Github")])])],1)],1)},c=[],u={name:"Index",components:{},methods:{index:function(){this.$router.push("/")},sketcher:function(){this.$router.push("/sketchbook")},gallery:function(){this.$router.push("/gallery")}},data:function(){return{drawer:!0}}},l=u,h=(a("5b49"),a("2877")),p=a("6544"),d=a.n(p),v=a("40dc"),f=a("8336"),m=a("2fa4"),b=a("2a7f"),g=Object(h["a"])(l,o,c,!1,null,null,null),w=g.exports;d()(g,{VAppBar:v["a"],VBtn:f["a"],VSpacer:m["a"],VToolbarTitle:b["a"]});var k={name:"App",components:{Nav:w},data:function(){return{}}},y=k,x=a("f6c4"),S=Object(h["a"])(y,s,i,!1,null,null,null),_=S.exports;d()(S,{VMain:x["a"]});var j=a("f309");n["a"].use(j["a"]);var O=new j["a"]({}),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{id:"home"}},[a("Index"),a("UnivCanvas")],1)},I=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-img",{attrs:{src:a("5069"),alt:"cat"}}),n("br"),n("h1",[t._v(" WIP ")]),n("span",[t._v(" Make your Sketch to Art! ")]),n("br"),n("span",[t._v(" 현재 Desktop 환경에 맞게 개발되고 있습니다. ")])],1)},P=[],X={name:"Index",components:{},methods:{},data:function(){return{drawer:!0}}},L=X,Y=a("a523"),$=a("adda"),D=Object(h["a"])(L,E,P,!1,null,null,null),T=D.exports;d()(D,{VContainer:Y["a"],VImg:$["a"]});var A={name:"Home",components:{Index:T},methods:{sketcher:function(){this.$router.push("/sketcher")},gallery:function(){this.$router.push("/gallery")}}},M=A,R=a("a722"),U=Object(h["a"])(M,C,I,!1,null,"270fead8",null),N=U.exports;d()(U,{VLayout:R["a"]});var V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("div",{staticClass:"item",attrs:{id:"uc"}},[a("UnivCanvas",{staticClass:"uc"})],1),a("div",{staticClass:"item",attrs:{id:"ic"}},[a("ImageCard",{staticClass:"ic"})],1)])},B=[],F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrapUC"}},[a("canvas",{staticClass:"canvas",attrs:{id:"sketchpad",height:"512",width:"512"}}),a("div",{attrs:{id:"buttons"}},[a("br"),a("v-btn",{attrs:{id:"eraser",text:"",color:"black",outlined:"",elevation:"0"},on:{click:t.eraser}},[t.isEraser?a("span",[t._v(" 펜 ")]):a("span",[t._v(" 지우개 ")])]),a("v-btn",{attrs:{text:"",color:"black",outlined:"",elevation:"0"},on:{click:t.eraseCanvas}},[t._v("지우기")]),a("v-btn",{attrs:{text:"",color:"black",outlined:"",elevation:"0"},on:{click:t.capture}},[t._v("제출")])],1)])},q=[],z=a("5530"),G=(a("ac1f"),a("1276"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("bc3a")),J=a.n(G),H=a("2f62"),W={name:"UnivCanvas",data:function(){return{canvas:null,context:null,previousX:0,previousY:0,currentX:0,currentY:0,mouseDown:0,mouseX:0,mousey:0,touchX:0,touchY:0,pressing:!1,pressedAt:Date.now(),shapes:[],currnetShape:[],intervalLastPosition:[-1,-1],reader:new FileReader,stroke:3,color:"black",isEraser:!1}},prop:{image:Object},methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(H["b"])(["addNewImage"])),Object(H["b"])(["resetImage"])),{},{newFile:function(){var t=this.$el.querySelector(".fileInput").files,e=t[t.length-1];this.reader.readAsDataURL(e)},attachFile:function(){this.$el.querySelector(".fileInput").click()},eraser:function(){!1===this.isEraser?(this.color="white",this.stroke=15,this.isEraser=!0,console.log("Switch to eraser")):(this.color="black",this.stroke=3,this.isEraser=!1,console.log("Switch to pen"))},capture:function(){this.resetImage();var t=this.$el.querySelector("canvas"),e=t.toDataURL("image/jpeg");this.addNewImage(e);for(var a=t.toDataURL("image/jpeg","image/octet-stream"),n=atob(a.split(",")[1]),r=[],s=0;s<n.length;s++)r.push(n.charCodeAt(s));var i=new Blob([new Uint8Array(r)],{type:"image/jpeg"}),o="canvas_img_"+(new Date).getMilliseconds()+".jpg",c=new FormData;c.append("file",i,o);var u=this.$store.getters.urlOf("styleTransferServer"),l="".concat(u,"/api/saveSketch");J.a.post(l,c,{responseType:"arraybuffer"}),console.log("Captured")},eraseCanvas:function(){this.resetImage(),this.shapes=[],this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle="white",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),console.log("erase the canvas")},prepareNewShape:function(){this.currentShape=[[],[],[]]},storeCoordinates:function(){this.intervalLastPosition[0]!==this.previousX&&this.intervalLastPosition[1]!==this.previousY&&(this.intervalLastPosition=[this.previousX,this.previousY],this.currentShape[0].push(this.previousX),this.currentShape[1].push(this.previousY),this.currentShape[2].push(Date.now()-this.pressedAt))},commitCurrentShape:function(){this.shapes.push(this.currentShape),console.log(this.currentShape)},draw:function(t){var e;switch(t.type){case"pointerdown":case"mousedown":e=this.drawDown(t);break;case"pointercancle":case"touchcancle":case"mouseout":if(!this.pressing)break;clearInterval(e),this.commitCurrentShape();break;case"pointerup":case"touchup":case"mouseup":console.log("clearing interval!"),this.pressing=!1,clearInterval(e),this.commitCurrentShape();break;case"pointermove":case"mousemove":this.pressing&&this.drawMove(t);break;case"touchmove":this.drawMove(t),t.preventDefault();break;case"touchstart":this.drawDown(t),e=this.drawDown(t),t.preventDefault();break}},drawDown:function(t){var e=this;return this.updateXY(t),this.pressing=!0,this.pressedAt=Date.now(),this.prepareNewShape(),window.setInterval((function(){return e.storeCoordinates()}),9)},drawMove:function(t){var e=this.stroke,a=this.color;this.updateXY(t),this.context.beginPath(),this.context.moveTo(this.previousX,this.previousY),this.context.lineTo(this.currentX,this.currentY),this.context.strokeStyle=a,this.context.fillStyle=a,this.context.lineCap="round",this.context.lineJoin="round",this.context.lineWidth=e,this.context.stroke(),this.context.closePath()},updateXY:function(t){this.previousX=this.currentX,this.previousY=this.currentY,t.targetTouches?(this.getTouchPos(t),this.currentX=this.touchX,this.currentY=this.touchY):(this.getMousePos(t),this.currentX=this.mouseX,this.currentY=this.mouseY)},getMousePos:function(t){t.offsetX?(this.mouseX=t.offsetX,this.mouseY=t.offsetY):t.layerX&&(this.mouseX=t.layerX,this.mouseY=t.layerY)},getTouchPos:function(t){if(t.touches){if(1==t.touches.length){var e=t.touches[0],a=t.target.getBoundingClientRect();this.touchX=e.pageX-a.x,this.touchY=e.pageY-a.y}console.log("gotTP")}}}),mounted:function(){var t=this;this.canvas=this.$el.querySelector("canvas"),this.context=this.canvas.getContext("2d"),this.context.fillStyle="white",this.context.fillRect(0,0,512,512),window.PointerEvent?(this.canvas.addEventListener("pointerdown",this.draw),this.canvas.addEventListener("pointermove",this.draw),this.canvas.addEventListener("pointerup",this.draw),this.canvas.addEventListener("pointercancel",this.draw)):(this.canvas.addEventListener("touchstart",this.draw),this.canvas.addEventListener("touchmove",this.draw),this.canvas.addEventListener("touchend",this.draw),this.canvas.addEventListener("touchcancel",this.draw),this.canvas.addEventListener("mousemove",this.draw),this.canvas.addEventListener("mousedown",this.draw),this.canvas.addEventListener("mouseup",this.draw),this.canvas.addEventListener("mousecout",this.draw)),this.reader.addEventListener("load",(function(){t.addNewImage(t.reader.result)}))}},K=W,Q=(a("aa76"),Object(h["a"])(K,F,q,!1,null,"9fab7e86",null)),Z=Q.exports;d()(Q,{VBtn:f["a"]});var tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"wrap"}},[!1===t.isProcessed?n("div",[n("img",{attrs:{id:"null",src:a("8554")}})]):n("div",{staticClass:"inf"},[n("img",{attrs:{id:"i0",src:t.temp0}}),n("img",{attrs:{id:"i1",src:t.temp1}}),n("img",{attrs:{id:"i2",src:t.temp2}}),n("img",{attrs:{id:"i3",src:t.temp3}})]),n("br"),n("div",[n("v-btn",{attrs:{text:"",color:"black",outlined:"",elevation:"0"},on:{click:t.change}},[t._v("변경")])],1)])},et=[],at=a("ce01"),nt=at["a"],rt=(a("4ef8"),Object(h["a"])(nt,tt,et,!1,null,"ab24a17c",null)),st=rt.exports;d()(rt,{VBtn:f["a"]});var it={name:"Sketcher",components:{UnivCanvas:Z,ImageCard:st},data:function(){return{}}},ot=it,ct=(a("1ab8"),Object(h["a"])(ot,V,B,!1,null,null,null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"gallery"}})},ht=[],pt={},dt=Object(h["a"])(pt,lt,ht,!1,null,null,null),vt=dt.exports;n["a"].use(r["a"]);var ft=[{path:"/",name:"Home",component:N},{path:"/sketchbook",name:"SketchBook",component:ut},{path:"/gallery",name:"Gallery",component:vt}],mt=new r["a"]({mode:"history",base:"/sketch2art/",routes:ft}),bt=mt,gt={styleTransferServer:"http://172.27.186.221:4000"},wt={urlOf:function(t){return function(e){return t[e]}}},kt={},yt={},xt={state:gt,getters:wt,mutations:kt,actions:yt},St=function(){return{images:[],processed:!1}},_t=St(),jt={getImages:function(t){return t.images},getProcessed:function(t){return t.processed}},Ot={addNewImage:function(t,e){t.images.push(e)},resetState:function(t){Object.assign(t,St())}},Ct={addNewImage:function(t,e){var a=t.commit;a("addNewImage",{original:e,style:0,processed:!0})},resetImage:function(t){var e=t.commit;e("resetState")}},It={state:_t,getters:jt,mutations:Ot,actions:Ct};n["a"].use(H["a"]);var Et=new H["a"].Store({state:{},mutations:{},actions:{},getters:{},modules:{urls:xt,images:It}});n["a"].config.productionTip=!1,n["a"].use(r["a"]),new n["a"]({vuetify:O,render:function(t){return t(_)},router:bt,store:Et}).$mount("#app")},"58de":function(t,e,a){},"5b49":function(t,e,a){"use strict";a("58de")},"63bf":function(t,e,a){},8554:function(t,e,a){t.exports=a.p+"img/1.f0d748e6.jpg"},"8f1b":function(t,e,a){},aa76:function(t,e,a){"use strict";a("63bf")},cbeb:function(t,e,a){},ce01:function(t,e,a){"use strict";(function(t){var n=a("1da1"),r=(a("96cf"),a("ac1f"),a("1276"),a("466d"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("25f0"),a("bc3a")),s=a.n(r),i=a("2f62");e["a"]={name:"ImageCard",props:{image:Object(i["c"])("getImages")},data:function(){return{isProcessed:!1,temp0:null,temp1:null,temp2:null,temp3:null}},methods:{dataURLtoFile:function(t,e){var a=t.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),s=r.length,i=new Uint8Array(s);while(s--)i[s]=r.charCodeAt(s);return new File([i],e,{type:n})},submit:function(){},stylize:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var n,r,i,o,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=new FormData,n.append("contentImage",e.dataURLtoFile(e.image.original)),r=e.$store.getters.urlOf("styleTransferServer"),i="".concat(r,"/api/stylize"),o=0;case 5:if(!(o<4)){a.next=24;break}return a.next=8,s.a.post(i,n,{responseType:"arraybuffer"});case 8:c=a.sent,u="data:"+c.headers["content-type"]+";base64,"+t.from(c.data,"binary").toString("base64"),a.t0=o,a.next=0===a.t0?13:1===a.t0?15:2===a.t0?17:3===a.t0?19:21;break;case 13:return e.temp0=u,a.abrupt("break",21);case 15:return e.temp1=u,a.abrupt("break",21);case 17:return e.temp2=u,a.abrupt("break",21);case 19:return e.temp3=u,a.abrupt("break",21);case 21:o++,a.next=5;break;case 24:e.isProcessed=!0;case 25:case"end":return a.stop()}}),a)})))()}},watch:{image:function(){this.stylize()},check_image:function(t){this.image=t}},mounted:function(){this.stylize()},computed:{check_image:function(){return this.$store.getters.getImages[0]}}}}).call(this,a("b639").Buffer)}});
//# sourceMappingURL=app.70489ab8.js.map