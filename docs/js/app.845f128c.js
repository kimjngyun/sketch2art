(function(t){function e(e){for(var s,o,c=e[0],i=e[1],l=e[2],h=0,d=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,c=1;c<a.length;c++){var i=a[c];0!==n[i]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/sketch2art/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=i;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0841":function(t,e,a){},5069:function(t,e,a){t.exports=a.p+"img/cat.1f801deb.jpeg"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=a("8c4f"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"APP"}},[a("Nav"),a("v-main",[a("router-view")],1)],1)},o=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",[a("v-app-bar",{attrs:{flat:"",app:""}},[a("v-toolbar-title",{staticClass:"text-uppercas grey--text"},[a("v-btn",{staticClass:"font-weight-light",attrs:{text:"",elevation:"0"},on:{click:t.index}},[a("span",[t._v("Sketch2Art")])])],1),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"black",elevation:"0"},on:{click:t.sketcher}},[a("span",[t._v("Sketcher")])]),a("v-btn",{attrs:{text:"",color:"black",elevation:"0"},on:{click:t.gallery}},[a("span",[t._v("Gallery")])]),a("v-btn",{attrs:{text:"",color:"black",href:"https://github.com/sketch2art",elevation:"0"}},[a("span",[t._v("Github")])])],1)],1)},i=[],l={name:"Index",components:{},methods:{index:function(){this.$router.push("/")},sketcher:function(){this.$router.push("/sketcher")},gallery:function(){this.$router.push("/gallery")}},data:function(){return{drawer:!0}}},u=l,h=(a("5b49"),a("2877")),d=a("6544"),f=a.n(d),p=a("40dc"),m=a("8336"),v=a("2fa4"),g=a("2a7f"),b=Object(h["a"])(u,c,i,!1,null,null,null),y=b.exports;f()(b,{VAppBar:p["a"],VBtn:m["a"],VSpacer:v["a"],VToolbarTitle:g["a"]});var w={name:"App",components:{Nav:y},data:function(){return{}}},_=w,k=a("7496"),x=a("f6c4"),S=Object(h["a"])(_,r,o,!1,null,null,null),O=S.exports;f()(S,{VApp:k["a"],VMain:x["a"]});var j=a("f309");s["a"].use(j["a"]);var I=new j["a"]({}),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{id:"home"}},[a("Index")],1)},P=[],$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-img",{attrs:{src:a("5069"),alt:"cat"}}),s("br"),s("h1",[t._v(" WIP ")]),s("span",[t._v(" Make your Sketch to Art! ")])],1)},D=[],E={name:"Index",components:{},methods:{},data:function(){return{drawer:!0}}},T=E,V=a("a523"),M=a("adda"),X=Object(h["a"])(T,$,D,!1,null,null,null),L=X.exports;f()(X,{VContainer:V["a"],VImg:M["a"]});var A={name:"Home",components:{Index:L},methods:{sketcher:function(){this.$router.push("/sketcher")},gallery:function(){this.$router.push("/gallery")}}},R=A,U=a("a722"),Y=Object(h["a"])(R,C,P,!1,null,"0e4ed557",null),N=Y.exports;f()(Y,{VLayout:U["a"]});var B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{id:"Sketcher"}},[a("mobileSketch"),t._l(t.getImages,(function(t,e){return a("ImageCard",{key:e,staticClass:"mx-auto my-4",attrs:{image:t}})}))],2)},F=[],q=a("5530"),z=a("2f62"),G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("body",{attrs:{onload:"init()"}},[a("div",{attrs:{id:"sketchpadapp"}},[t._m(0),a("div",{staticClass:"btns"},[a("v-btn",{on:{click:t.eraseCanvas}},[t._v("clear")]),a("v-btn",{on:{click:t.capture}},[t._v("submit")])],1)])])},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rightside"},[a("canvas",{attrs:{id:"sketchpad",height:"512",width:"512"}})])}],J=(a("ac1f"),a("1276"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("cb29"),a("bc3a")),W=a.n(J),K={name:"mobileSketch",data:function(){return{canvas:null,r:0,g:0,b:0,a:0,ctx:0,mouseX:0,mousey:0,mouseDown:0,touchX:0,touchY:0,shapes:[],stroke:2}},methods:Object(q["a"])(Object(q["a"])({},Object(z["b"])(["addNewImage"])),{},{newFile:function(){var t=this.$el.querySelector(".fileInput").files,e=t[t.length-1];this.reader.readAsDataURL(e)},attachFile:function(){this.$el.querySelector(".fileInput").click()},capture:function(){var t=this.$el.querySelector("canvas"),e=t.toDataURL("image/jpeg");this.addNewImage(e);for(var a=t.toDataURL("image/jpeg","image/octet-stream"),s=atob(a.split(",")[1]),n=[],r=0;r<s.length;r++)n.push(s.charCodeAt(r));var o=new Blob([new Uint8Array(n)],{type:"image/jpeg"}),c="canvas_img_"+(new Date).getMilliseconds()+".jpg",i=new FormData;i.append("file",o,c);var l=this.$store.getters.urlOf("styleTransferServer"),u="".concat(l,"/fileUpload");W.a.post(u,i,{responseType:"arraybuffer"}),console.log("Uploaded and Captured")},eraseCanvas:function(){this.shapes=[],this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),console.log("erase the canvas")},drawDot:function(t,e,a,s){this.r=0,this.g=0,this.b=0,this.a=255,t.fillStyle="rgba("+this.r+","+this.g+","+this.b+","+this.a/255+")",t.beginPath(),t.arc(e,a,s,0,2*Math.PI,!0),t.closePath(),t.fill()},sketchpad_mouseDown:function(){this.mouseDown=1,this.drawDot(this.ctx,this.mouseX,this.mouseY,this.stroke)},sketchpad_mouseUp:function(){this.mouseDown=0},sketchpad_mouseMove:function(t){this.getMousePos(t),1==this.mouseDown&&this.drawDot(this.ctx,this.mouseX,this.mouseY,this.stroke)},getMousePos:function(t){t.offsetX?(this.mouseX=t.offsetX,this.mouseY=t.offsetY):t.layerX&&(this.mouseX=t.layerX,this.mouseY=t.layerY)},sketchpad_touchStart:function(){this.getTouchPos(),this.drawDot(this.ctx,this.touchX,this.touchY,this.stroke),event.preventDefault()},sketchpad_touchMove:function(t){this.getTouchPos(t),this.drawDot(this.ctx,this.touchX,this.touchY,this.stroke),event.preventDefault()},getTouchPos:function(t){if(t.touches&&1==t.touches.length){var e=t.touches[0],a=t.target.getBoundingClientRect();this.touchX=e.pageX-a.x,this.touchY=e.pageY-a.y,console.log(e.target.offsetLeft,e.target.offsetTop)}}}),mounted:function(){this.canvas=document.getElementById("sketchpad"),this.canvas.getContext&&(this.ctx=this.canvas.getContext("2d")),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,512,512),this.ctx&&(this.canvas.addEventListener("mousedown",this.sketchpad_mouseDown,!1),this.canvas.addEventListener("mousemove",this.sketchpad_mouseMove,!1),window.addEventListener("mouseup",this.sketchpad_mouseUp,!1),this.canvas.addEventListener("touchstart",this.sketchpad_touchStart,!1),this.canvas.addEventListener("touchmove",this.sketchpad_touchMove,!1))}},Q=K,Z=(a("cdb6"),Object(h["a"])(Q,G,H,!1,null,null,null)),tt=Z.exports;f()(Z,{VBtn:m["a"]});var et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[t.isProcessed?a("img",{attrs:{src:t.image.processed}}):a("img",{attrs:{src:t.image.original}}),t.isProcessed?a("v-card-subtitle",{staticClass:"pb-0"},[t._v(" Styled Image with Style "),a("b",[t._v(' "'+t._s(t.styleNames[t.style])+'" ')])]):a("v-card-subtitle",{staticClass:"pb-0"},[t._v(" Original Image ")]),a("v-card-text",{staticClass:"text--primary mb-8"},[a("div",[t._v("스타일 번호를 선택하세요.")]),a("v-slider",{attrs:{"tick-labels":t.styles,min:-1,max:10,step:"1",ticks:"always",label:"Style Number","hide-details":"true",solo:""},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}})],1)],1)},at=[],st=a("ce01"),nt=st["a"],rt=(a("e761"),a("b0af")),ot=a("99d9"),ct=a("ba0d"),it=Object(h["a"])(nt,et,at,!1,null,"0fe6e7e2",null),lt=it.exports;f()(it,{VCard:rt["a"],VCardSubtitle:ot["a"],VCardText:ot["b"],VSlider:ct["a"]});var ut={name:"Sketcher",components:{mobileSketch:tt,ImageCard:lt},data:function(){return{}},computed:Object(q["a"])({},Object(z["c"])(["getImages"]))},ht=ut,dt=Object(h["a"])(ht,B,F,!1,null,null,null),ft=dt.exports;f()(dt,{VLayout:U["a"]});var pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"gallery"}})},mt=[],vt={},gt=Object(h["a"])(vt,pt,mt,!1,null,null,null),bt=gt.exports;s["a"].use(n["a"]);var yt=[{path:"/",name:"Home",component:N},{path:"/sketcher",name:"Sketcher",component:ft},{path:"/gallery",name:"Gallery",component:bt}],wt=new n["a"]({mode:"history",base:"/sketch2art/",routes:yt}),_t=wt,kt={styleTransferServer:"http://172.27.186.221:4000"},xt={urlOf:function(t){return function(e){return t[e]}}},St={},Ot={},jt={state:kt,getters:xt,mutations:St,actions:Ot},It={images:[]},Ct={getImages:function(t){return t.images}},Pt={addNewImage:function(t,e){t.images.push(e)}},$t={addNewImage:function(t,e){var a=t.commit;a("addNewImage",{original:e,style:0,processed:null})}},Dt={state:It,getters:Ct,mutations:Pt,actions:$t};s["a"].use(z["a"]);var Et=new z["a"].Store({state:{},mutations:{},actions:{},getters:{},modules:{urls:jt,images:Dt}});s["a"].config.productionTip=!1,s["a"].use(n["a"]),new s["a"]({vuetify:I,render:function(t){return t(O)},router:_t,store:Et}).$mount("#app")},"58de":function(t,e,a){},"5b49":function(t,e,a){"use strict";a("58de")},cdb6:function(t,e,a){"use strict";a("dba7")},ce01:function(t,e,a){"use strict";(function(t){var s=a("1da1"),n=(a("96cf"),a("ac1f"),a("1276"),a("466d"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("25f0"),a("bc3a")),r=a.n(n);e["a"]={name:"ImageCard",props:{image:Object},data:function(){return{isProcessed:!1,style:-1,styles:["original","0","1","2","3","4","5","6","7","8","9","10"],styleNames:["candy","composition_7","feathers","la_muse","mosaic","rain","starry_night","the_scream","the_wave","udnie"]}},methods:{dataURLtoFile:function(t,e){var a=t.split(","),s=a[0].match(/:(.*?);/)[1],n=atob(a[1]),r=n.length,o=new Uint8Array(r);while(r--)o[r]=n.charCodeAt(r);return new File([o],e,{type:s})},stylize:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s,n,o,c,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(-1!==e.style){a.next=3;break}return e.isProcessed=!1,a.abrupt("return");case 3:return s=new FormData,s.append("style",e.style),s.append("contentImage",e.dataURLtoFile(e.image.original,"styled_".concat(e.style))),n=e.$store.getters.urlOf("styleTransferServer"),o="".concat(n,"/api/stylize"),a.next=10,r.a.post(o,s,{responseType:"arraybuffer"});case 10:c=a.sent,i="data:"+c.headers["content-type"]+";base64,"+t.from(c.data,"binary").toString("base64"),e.image.processed=i,e.isProcessed=!0;case 14:case"end":return a.stop()}}),a)})))()}},watch:{style:function(){this.stylize()}}}}).call(this,a("b639").Buffer)},dba7:function(t,e,a){},e761:function(t,e,a){"use strict";a("0841")}});
//# sourceMappingURL=app.845f128c.js.map