(function(t){function e(e){for(var n,o,c=e[0],i=e[1],u=e[2],h=0,d=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,c=1;c<a.length;c++){var i=a[c];0!==s[i]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/sketch2art/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=i;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},4783:function(t,e,a){},5069:function(t,e,a){t.exports=a.p+"img/cat.1f801deb.jpeg"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=a("8c4f"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"APP"}},[a("Nav"),a("v-main",[a("router-view")],1)],1)},o=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",[a("v-app-bar",{attrs:{flat:"",app:""}},[a("v-toolbar-title",{staticClass:"text-uppercas grey--text"},[a("v-btn",{staticClass:"font-weight-light",attrs:{text:"",elevation:"0"},on:{click:t.index}},[a("span",[t._v("Sketch2Art")])])],1),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"black",elevation:"0"},on:{click:t.sketcher}},[a("span",[t._v("Sketcher")])]),a("v-btn",{attrs:{text:"",color:"black",elevation:"0"},on:{click:t.gallery}},[a("span",[t._v("Gallery")])]),a("v-btn",{attrs:{text:"",color:"black",href:"https://github.com/sketch2art",elevation:"0"}},[a("span",[t._v("Github")])])],1)],1)},i=[],u={name:"Index",components:{},methods:{index:function(){this.$router.push("/")},sketcher:function(){this.$router.push("/sketcher")},gallery:function(){this.$router.push("/gallery")}},data:function(){return{drawer:!0}}},l=u,h=(a("5b49"),a("2877")),d=a("6544"),f=a.n(d),p=a("40dc"),m=a("8336"),v=a("2fa4"),g=a("2a7f"),b=Object(h["a"])(l,c,i,!1,null,null,null),y=b.exports;f()(b,{VAppBar:p["a"],VBtn:m["a"],VSpacer:v["a"],VToolbarTitle:g["a"]});var k={name:"App",components:{Nav:y},data:function(){return{}}},w=k,x=a("7496"),_=a("f6c4"),S=Object(h["a"])(w,r,o,!1,null,null,null),j=S.exports;f()(S,{VApp:x["a"],VMain:_["a"]});var O=a("f309");n["a"].use(O["a"]);var I=new O["a"]({}),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{id:"home"}},[a("Index")],1)},C=[],D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-img",{attrs:{src:a("5069"),alt:"cat"}}),n("br"),n("h1",[t._v(" WIP ")]),n("span",[t._v(" Make your Sketch to Art! ")])],1)},V=[],$={name:"Index",components:{},methods:{},data:function(){return{drawer:!0}}},T=$,E=a("a523"),L=a("adda"),M=Object(h["a"])(T,D,V,!1,null,null,null),X=M.exports;f()(M,{VContainer:E["a"],VImg:L["a"]});var A={name:"Home",components:{Index:X},methods:{sketcher:function(){this.$router.push("/sketcher")},gallery:function(){this.$router.push("/gallery")}}},R=A,Y=a("a722"),U=Object(h["a"])(R,P,C,!1,null,"0e4ed557",null),B=U.exports;f()(U,{VLayout:Y["a"]});var N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{id:"Sketcher"}},[a("mobileSketch",{staticClass:"mx-auto my-4"}),t._l(t.getImages,(function(t,e){return a("ImageCard",{key:e,staticClass:"mx-auto my-4",attrs:{image:t}})}))],2)},F=[],z=a("5530"),q=a("2f62"),G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"univSketch"},[a("v-card",{attrs:{elevation:"0"}},[a("canvas",{attrs:{id:"sketchpad",height:"512",width:"512"}}),a("v-card-text",[t._v(" If you submit, we considered as you agree that "),a("br"),t._v(" the sketch image can be used as a dataset. ")]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"black",outlined:"",elevation:"0"},on:{click:t.eraseCanvas}},[t._v("clear")]),a("v-btn",{attrs:{text:"",color:"black",outlined:"",elevation:"0"},on:{click:t.capture}},[t._v("submit")])],1)],1)],1)},H=[],J=(a("ac1f"),a("1276"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("cb29"),a("bc3a")),W=a.n(J),K={name:"mobileSketch",data:function(){return{canvas:null,r:0,g:0,b:0,a:0,ctx:0,mouseX:0,mousey:0,mouseDown:0,touchX:0,touchY:0,shapes:[],stroke:2}},prop:{image:Object},methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(q["b"])(["addNewImage"])),Object(q["b"])(["resetImage"])),{},{newFile:function(){var t=this.$el.querySelector(".fileInput").files,e=t[t.length-1];this.reader.readAsDataURL(e)},attachFile:function(){this.$el.querySelector(".fileInput").click()},capture:function(){this.resetImage();var t=this.$el.querySelector("canvas"),e=t.toDataURL("image/jpeg");this.addNewImage(e);for(var a=t.toDataURL("image/jpeg","image/octet-stream"),n=atob(a.split(",")[1]),s=[],r=0;r<n.length;r++)s.push(n.charCodeAt(r));var o=new Blob([new Uint8Array(s)],{type:"image/jpeg"}),c="canvas_img_"+(new Date).getMilliseconds()+".jpg",i=new FormData;i.append("file",o,c);var u=this.$store.getters.urlOf("styleTransferServer"),l="".concat(u,"/fileUpload");W.a.post(l,i,{responseType:"arraybuffer"}),console.log("Captured"),this.image.submitted=!0},eraseCanvas:function(){this.resetImage(),this.shapes=[],this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),console.log("erase the canvas")},drawDot:function(t,e,a,n){this.r=0,this.g=0,this.b=0,this.a=255,t.fillStyle="rgba("+this.r+","+this.g+","+this.b+","+this.a/255+")",t.beginPath(),t.arc(e,a,n,0,2*Math.PI,!0),t.closePath(),t.fill()},sketchpad_mouseDown:function(){this.mouseDown=1,this.drawDot(this.ctx,this.mouseX,this.mouseY,this.stroke)},sketchpad_mouseUp:function(){this.mouseDown=0},sketchpad_mouseMove:function(t){this.getMousePos(t),1==this.mouseDown&&this.drawDot(this.ctx,this.mouseX,this.mouseY,this.stroke)},getMousePos:function(t){t.offsetX?(this.mouseX=t.offsetX,this.mouseY=t.offsetY):t.layerX&&(this.mouseX=t.layerX,this.mouseY=t.layerY)},sketchpad_touchStart:function(){this.getTouchPos(),this.drawDot(this.ctx,this.touchX,this.touchY,this.stroke),event.preventDefault()},sketchpad_touchMove:function(t){this.getTouchPos(t),this.drawDot(this.ctx,this.touchX,this.touchY,this.stroke),event.preventDefault()},getTouchPos:function(t){if(t.touches&&1==t.touches.length){var e=t.touches[0],a=t.target.getBoundingClientRect();this.touchX=e.pageX-a.x,this.touchY=e.pageY-a.y,console.log(e.target.offsetLeft,e.target.offsetTop)}}}),mounted:function(){this.canvas=document.getElementById("sketchpad"),this.canvas.getContext&&(this.ctx=this.canvas.getContext("2d")),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,512,512),this.ctx&&(this.canvas.addEventListener("mousedown",this.sketchpad_mouseDown,!1),this.canvas.addEventListener("mousemove",this.sketchpad_mouseMove,!1),window.addEventListener("mouseup",this.sketchpad_mouseUp,!1),this.canvas.addEventListener("touchstart",this.sketchpad_touchStart,!1),this.canvas.addEventListener("touchmove",this.sketchpad_touchMove,!1))}},Q=K,Z=(a("cdb6"),a("b0af")),tt=a("99d9"),et=Object(h["a"])(Q,G,H,!1,null,null,null),at=et.exports;f()(et,{VBtn:m["a"],VCard:Z["a"],VCardActions:tt["a"],VCardText:tt["b"],VLayout:Y["a"]});var nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{elevation:"0"}},[t.isProcessed?n("img",{attrs:{id:"image",src:t.image.processed}}):n("img",{attrs:{id:"image",src:a("8554")}}),t.isProcessed?n("v-card-text",[t._v(" Translated Sketch! "),n("br"),t._v(" If you don't like, press change button! ")]):n("v-card-text",[t._v(" Draw and Submit "),n("br"),t._v(" Press Change ")]),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"black",outlined:"",elevation:"0"},on:{click:t.stylize}},[t._v(" Change ")]),n("v-btn",{attrs:{text:"",color:"black",outlined:"",elevation:"0"},on:{click:t.submit}},[t._v(" Submit ")])],1)],1)},st=[],rt=a("ce01"),ot=rt["a"],ct=(a("e561"),Object(h["a"])(ot,nt,st,!1,null,"4c1586be",null)),it=ct.exports;f()(ct,{VBtn:m["a"],VCard:Z["a"],VCardActions:tt["a"],VCardText:tt["b"]});var ut={name:"Sketcher",components:{mobileSketch:at,ImageCard:it},data:function(){return{}},computed:Object(z["a"])({},Object(q["c"])(["getImages","getProcessed"]))},lt=ut,ht=Object(h["a"])(lt,N,F,!1,null,null,null),dt=ht.exports;f()(ht,{VLayout:Y["a"]});var ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"gallery"}})},pt=[],mt={},vt=Object(h["a"])(mt,ft,pt,!1,null,null,null),gt=vt.exports;n["a"].use(s["a"]);var bt=[{path:"/",name:"Home",component:B},{path:"/sketcher",name:"Sketcher",component:dt},{path:"/gallery",name:"Gallery",component:gt}],yt=new s["a"]({mode:"history",base:"/sketch2art/",routes:bt}),kt=yt,wt={styleTransferServer:"http://172.27.186.221:4000"},xt={urlOf:function(t){return function(e){return t[e]}}},_t={},St={},jt={state:wt,getters:xt,mutations:_t,actions:St},Ot=function(){return{images:[],processed:!1,submitted:!1}},It=Ot(),Pt={getImages:function(t){return t.images},getProcessed:function(t){return t.processed},getSubmitted:function(t){return t.submitted}},Ct={addNewImage:function(t,e){t.images.push(e)},resetState:function(t){Object.assign(t,Ot())}},Dt={addNewImage:function(t,e){var a=t.commit;a("addNewImage",{original:e,style:0,processed:!0,submitted:!0})},resetImage:function(t){var e=t.commit;e("resetState")}},Vt={state:It,getters:Pt,mutations:Ct,actions:Dt};n["a"].use(q["a"]);var $t=new q["a"].Store({state:{},mutations:{},actions:{},getters:{},modules:{urls:jt,images:Vt}});n["a"].config.productionTip=!1,n["a"].use(s["a"]),new n["a"]({vuetify:I,render:function(t){return t(j)},router:kt,store:$t}).$mount("#app")},"58de":function(t,e,a){},"5b49":function(t,e,a){"use strict";a("58de")},8554:function(t,e,a){t.exports=a.p+"img/1.f0d748e6.jpg"},cdb6:function(t,e,a){"use strict";a("dba7")},ce01:function(t,e,a){"use strict";(function(t){var n=a("1da1"),s=(a("96cf"),a("ac1f"),a("1276"),a("466d"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("25f0"),a("bc3a")),r=a.n(s);e["a"]={name:"ImageCard",props:{image:Object},data:function(){return{isProcessed:!1,style:10,styles:["original","0","1","2","3","4","5","6","7","8","9","10"],styleNames:["candy","composition_7","feathers","la_muse","mosaic","rain","starry_night","the_scream","the_wave","udnie","random"]}},methods:{dataURLtoFile:function(t,e){var a=t.split(","),n=a[0].match(/:(.*?);/)[1],s=atob(a[1]),r=s.length,o=new Uint8Array(r);while(r--)o[r]=s.charCodeAt(r);return new File([o],e,{type:n})},submit:function(){},stylize:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var n,s,o,c,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(-1!==e.style){a.next=3;break}return e.isProcessed=!1,a.abrupt("return");case 3:return n=new FormData,n.append("style",e.style),n.append("contentImage",e.dataURLtoFile(e.image.original,"styled_".concat(e.style))),s=e.$store.getters.urlOf("styleTransferServer"),o="".concat(s,"/api/stylize"),a.next=10,r.a.post(o,n,{responseType:"arraybuffer"});case 10:c=a.sent,i="data:"+c.headers["content-type"]+";base64,"+t.from(c.data,"binary").toString("base64"),e.image.processed=i,e.isProcessed=!0;case 14:case"end":return a.stop()}}),a)})))()}},watch:{style:function(){this.stylize()}}}}).call(this,a("b639").Buffer)},dba7:function(t,e,a){},e561:function(t,e,a){"use strict";a("4783")}});
//# sourceMappingURL=app.1555cb7a.js.map