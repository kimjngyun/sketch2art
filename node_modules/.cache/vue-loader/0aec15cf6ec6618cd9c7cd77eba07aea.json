{"remainingRequest":"/Users/kimjngyun/sketch2art/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kimjngyun/sketch2art/src/components/ImageCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kimjngyun/sketch2art/src/components/ImageCard.vue","mtime":1619720501139},{"path":"/Users/kimjngyun/sketch2art/node_modules/babel-loader/lib/index.js","mtime":1619154893880},{"path":"/Users/kimjngyun/sketch2art/node_modules/cache-loader/dist/cjs.js","mtime":1619073328948},{"path":"/Users/kimjngyun/sketch2art/node_modules/vue-loader/lib/index.js","mtime":1619154896205}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSW1hZ2VDYXJkJywKCiAgcHJvcHM6IHsKICAgIGltYWdlOiBPYmplY3QKICB9LAoKICBkYXRhOiAoKSA9PiAoewogICAgaXNQcm9jZXNzZWQ6IGZhbHNlLAogICAgc3R5bGU6IC0xLAogICAgc3R5bGVzOiBbJ29yaWdpbmFsJywgJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnMTAnXSwKICAgIHN0eWxlTmFtZXM6IFsnY2FuZHknLCAnY29tcG9zaXRpb25fNycsICdmZWF0aGVycycsICdsYV9tdXNlJywgJ21vc2FpYycsICdyYWluJywgJ3N0YXJyeV9uaWdodCcsICd0aGVfc2NyZWFtJywgJ3RoZV93YXZlJywgJ3VkbmllJ10gLy8gVE9ETzogUkVOQU1FCiAgfSksCgogIG1ldGhvZHM6IHsKICAgIGRhdGFVUkx0b0ZpbGUgKGRhdGFVUkwsIGZpbGVOYW1lKSB7CiAgICAgIGNvbnN0IGFyciA9IGRhdGFVUkwuc3BsaXQoJywnKQogICAgICBjb25zdCBtaW1lID0gYXJyWzBdLm1hdGNoKC86KC4qPyk7LylbMV0KICAgICAgY29uc3QgYnN0ciA9IGF0b2IoYXJyWzFdKQogICAgICBsZXQgbiA9IGJzdHIubGVuZ3RoOwogICAgICBjb25zdCB1OGFyciA9IG5ldyBVaW50OEFycmF5KG4pCgogICAgICB3aGlsZSAobi0tKSB7CiAgICAgICAgdThhcnJbbl0gPSBic3RyLmNoYXJDb2RlQXQobikKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBGaWxlKFt1OGFycl0sIGZpbGVOYW1lLCB7dHlwZTogbWltZX0pCiAgICB9LAoKICAgIGFzeW5jIHN0eWxpemUgKCkgewogICAgICBpZiAodGhpcy5zdHlsZSA9PT0gLTEpIHsKICAgICAgICB0aGlzLmlzUHJvY2Vzc2VkID0gZmFsc2UKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgLy8gVE9ETzogY2xhc3Psl5AgbG9hZGluZyDrhKPquLAgCiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnc3R5bGUnLCB0aGlzLnN0eWxlKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2NvbnRlbnRJbWFnZScsIHRoaXMuZGF0YVVSTHRvRmlsZSh0aGlzLmltYWdlLm9yaWdpbmFsLCBgc3R5bGVkXyR7dGhpcy5zdHlsZX1gKSkKCiAgICAgIGNvbnN0IGJhc2VVUkwgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLnVybE9mKCdzdHlsZVRyYW5zZmVyU2VydmVyJykKICAgICAgY29uc3QgYXBpVVJMID0gYCR7YmFzZVVSTH0vYXBpL3N0eWxpemVgCgogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoYXBpVVJMLCBmb3JtRGF0YSwgewogICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJwogICAgICB9KQogICAgICBjb25zdCBzdHlsZWRJbWFnZVVSTCA9CiAgICAgICAgJ2RhdGE6JyArCiAgICAgICAgcmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ10gKwogICAgICAgICc7YmFzZTY0LCcgKwogICAgICAgIEJ1ZmZlci5mcm9tKHJlc3BvbnNlLmRhdGEsICdiaW5hcnknKS50b1N0cmluZygnYmFzZTY0JykgCgogICAgICB0aGlzLmltYWdlLnByb2Nlc3NlZCA9IHN0eWxlZEltYWdlVVJMCiAgICAgIHRoaXMuaXNQcm9jZXNzZWQgPSB0cnVlCiAgICB9CiAgfSwKCiAgd2F0Y2g6IHsKICAgIHN0eWxlICgpIHsKICAgICAgdGhpcy5zdHlsaXplKCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["ImageCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ImageCard.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card>\n      <img v-if=\"!isProcessed\" :src=\"image.original\" />\n      <img v-else :src=\"image.processed\" />\n\n      <v-card-subtitle\n        v-if=\"!isProcessed\"\n        class=\"pb-0\"\n      >\n        Original Image\n      </v-card-subtitle>\n\n      <v-card-subtitle\n        v-else\n        class=\"pb-0\"\n      >\n      Styled Image with Style <b> \"{{ styleNames[style] }}\" </b>\n      </v-card-subtitle>\n\n      <v-card-text class=\"text--primary mb-8\">\n        <div>스타일 번호를 선택하세요.</div>\n        <v-slider\n          v-model=\"style\"\n          :tick-labels=\"styles\"\n          :min=\"-1\"\n          :max=\"10\"\n          step=\"1\"\n          ticks=\"always\"\n          label=\"Style Number\"\n          hide-details=\"true\"\n          solo\n        >\n        </v-slider>\n      </v-card-text>\n    </v-card>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'ImageCard',\n\n  props: {\n    image: Object\n  },\n\n  data: () => ({\n    isProcessed: false,\n    style: -1,\n    styles: ['original', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],\n    styleNames: ['candy', 'composition_7', 'feathers', 'la_muse', 'mosaic', 'rain', 'starry_night', 'the_scream', 'the_wave', 'udnie'] // TODO: RENAME\n  }),\n\n  methods: {\n    dataURLtoFile (dataURL, fileName) {\n      const arr = dataURL.split(',')\n      const mime = arr[0].match(/:(.*?);/)[1]\n      const bstr = atob(arr[1])\n      let n = bstr.length;\n      const u8arr = new Uint8Array(n)\n\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n)\n      }\n\n      return new File([u8arr], fileName, {type: mime})\n    },\n\n    async stylize () {\n      if (this.style === -1) {\n        this.isProcessed = false\n        return\n      }\n\n      // TODO: class에 loading 넣기 \n      const formData = new FormData()\n\n      formData.append('style', this.style)\n      formData.append('contentImage', this.dataURLtoFile(this.image.original, `styled_${this.style}`))\n\n      const baseURL = this.$store.getters.urlOf('styleTransferServer')\n      const apiURL = `${baseURL}/api/stylize`\n\n      const response = await axios.post(apiURL, formData, {\n        responseType: 'arraybuffer'\n      })\n      const styledImageURL =\n        'data:' +\n        response.headers['content-type'] +\n        ';base64,' +\n        Buffer.from(response.data, 'binary').toString('base64') \n\n      this.image.processed = styledImageURL\n      this.isProcessed = true\n    }\n  },\n\n  watch: {\n    style () {\n      this.stylize()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.v-input {\n  font-size: 10px;\n}\n\n</style>\n"]}]}