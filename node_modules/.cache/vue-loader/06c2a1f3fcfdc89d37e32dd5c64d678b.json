{"remainingRequest":"/Users/kimjngyun/frontend/sketch2art/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kimjngyun/frontend/sketch2art/src/components/ImageCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kimjngyun/frontend/sketch2art/src/components/ImageCard.vue","mtime":1619413606543},{"path":"/Users/kimjngyun/frontend/sketch2art/node_modules/cache-loader/dist/cjs.js","mtime":1619073328948},{"path":"/Users/kimjngyun/frontend/sketch2art/node_modules/babel-loader/lib/index.js","mtime":1619154893880},{"path":"/Users/kimjngyun/frontend/sketch2art/node_modules/cache-loader/dist/cjs.js","mtime":1619073328948},{"path":"/Users/kimjngyun/frontend/sketch2art/node_modules/vue-loader/lib/index.js","mtime":1619154896205}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSW1hZ2VDYXJkJywKCiAgcHJvcHM6IHsKICAgIGltYWdlOiBPYmplY3QKICB9LAoKICBkYXRhOiAoKSA9PiAoewogICAgaXNQcm9jZXNzZWQ6IGZhbHNlLAogICAgc3R5bGU6IC0xLAogICAgc3R5bGVzOiBbJ29yaWdpbmFsJywgJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknXSwKICAgIHN0eWxlTmFtZXM6IFsnY2FuZHknLCAnY29tcG9zaXRpb25fNycsICdmZWF0aGVycycsICdsYV9tdXNlJywgJ21vc2FpYycsICdyYWluJywgJ3N0YXJyeV9uaWdodCcsICd0aGVfc2NyZWFtJywgJ3RoZV93YXZlJywgJ3VkbmllJ10KICB9KSwKCiAgbWV0aG9kczogewogICAgZGF0YVVSTHRvRmlsZSAoZGF0YVVSTCwgZmlsZU5hbWUpIHsKICAgICAgY29uc3QgYXJyID0gZGF0YVVSTC5zcGxpdCgnLCcpCiAgICAgIGNvbnN0IG1pbWUgPSBhcnJbMF0ubWF0Y2goLzooLio/KTsvKVsxXQogICAgICBjb25zdCBic3RyID0gYXRvYihhcnJbMV0pCiAgICAgIGxldCBuID0gYnN0ci5sZW5ndGg7CiAgICAgIGNvbnN0IHU4YXJyID0gbmV3IFVpbnQ4QXJyYXkobikKCiAgICAgIHdoaWxlIChuLS0pIHsKICAgICAgICB1OGFycltuXSA9IGJzdHIuY2hhckNvZGVBdChuKQogICAgICB9CgogICAgICByZXR1cm4gbmV3IEZpbGUoW3U4YXJyXSwgZmlsZU5hbWUsIHt0eXBlOiBtaW1lfSkKICAgIH0sCgogICAgYXN5bmMgc3R5bGl6ZSAoKSB7CiAgICAgIGlmICh0aGlzLnN0eWxlID09PSAtMSkgewogICAgICAgIHRoaXMuaXNQcm9jZXNzZWQgPSBmYWxzZQogICAgICAgIHJldHVybgogICAgICB9CgogICAgICAvLyBUT0RPOiBjbGFzc+yXkCBsb2FkaW5nIOuEo+q4sCAKICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQoKICAgICAgZm9ybURhdGEuYXBwZW5kKCdzdHlsZScsIHRoaXMuc3R5bGUpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY29udGVudEltYWdlJywgdGhpcy5kYXRhVVJMdG9GaWxlKHRoaXMuaW1hZ2Uub3JpZ2luYWwsIGBzdHlsZWRfJHt0aGlzLnN0eWxlfWApKQoKICAgICAgY29uc3QgYmFzZVVSTCA9IHRoaXMuJHN0b3JlLmdldHRlcnMudXJsT2YoJ3N0eWxlVHJhbnNmZXJTZXJ2ZXInKQogICAgICBjb25zdCBhcGlVUkwgPSBgJHtiYXNlVVJMfS9hcGkvc3R5bGl6ZWAKCiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChhcGlVUkwsIGZvcm1EYXRhLCB7CiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInCiAgICAgIH0pCiAgICAgIGNvbnN0IHN0eWxlZEltYWdlVVJMID0KICAgICAgICAnZGF0YTonICsKICAgICAgICByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSArCiAgICAgICAgJztiYXNlNjQsJyArCiAgICAgICAgQnVmZmVyLmZyb20ocmVzcG9uc2UuZGF0YSwgJ2JpbmFyeScpLnRvU3RyaW5nKCdiYXNlNjQnKSAKCiAgICAgIHRoaXMuaW1hZ2UucHJvY2Vzc2VkID0gc3R5bGVkSW1hZ2VVUkwKICAgICAgdGhpcy5pc1Byb2Nlc3NlZCA9IHRydWUKICAgIH0KICB9LAoKICB3YXRjaDogewogICAgc3R5bGUgKCkgewogICAgICB0aGlzLnN0eWxpemUoKQogICAgfQogIH0KfQo="},{"version":3,"sources":["ImageCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ImageCard.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card>\n      <img v-if=\"!isProcessed\" :src=\"image.original\" />\n      <img v-else :src=\"image.processed\" />\n\n      <v-card-subtitle\n        v-if=\"!isProcessed\"\n        class=\"pb-0\"\n      >\n        Original Image\n      </v-card-subtitle>\n\n      <v-card-subtitle\n        v-else\n        class=\"pb-0\"\n      >\n      Styled Image with Style <b> \"{{ styleNames[style] }}\" </b>\n      </v-card-subtitle>\n\n      <v-card-text class=\"text--primary mb-8\">\n        <div>스타일 번호를 선택하세요.</div>\n        <v-slider\n          v-model=\"style\"\n          :tick-labels=\"styles\"\n          :min=\"-1\"\n          :max=\"9\"\n          step=\"1\"\n          ticks=\"always\"\n          label=\"Style Number\"\n          height=\"30px\"\n          hide-details=\"true\"\n          solo\n        >\n        </v-slider>\n      </v-card-text>\n    </v-card>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'ImageCard',\n\n  props: {\n    image: Object\n  },\n\n  data: () => ({\n    isProcessed: false,\n    style: -1,\n    styles: ['original', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    styleNames: ['candy', 'composition_7', 'feathers', 'la_muse', 'mosaic', 'rain', 'starry_night', 'the_scream', 'the_wave', 'udnie']\n  }),\n\n  methods: {\n    dataURLtoFile (dataURL, fileName) {\n      const arr = dataURL.split(',')\n      const mime = arr[0].match(/:(.*?);/)[1]\n      const bstr = atob(arr[1])\n      let n = bstr.length;\n      const u8arr = new Uint8Array(n)\n\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n)\n      }\n\n      return new File([u8arr], fileName, {type: mime})\n    },\n\n    async stylize () {\n      if (this.style === -1) {\n        this.isProcessed = false\n        return\n      }\n\n      // TODO: class에 loading 넣기 \n      const formData = new FormData()\n\n      formData.append('style', this.style)\n      formData.append('contentImage', this.dataURLtoFile(this.image.original, `styled_${this.style}`))\n\n      const baseURL = this.$store.getters.urlOf('styleTransferServer')\n      const apiURL = `${baseURL}/api/stylize`\n\n      const response = await axios.post(apiURL, formData, {\n        responseType: 'arraybuffer'\n      })\n      const styledImageURL =\n        'data:' +\n        response.headers['content-type'] +\n        ';base64,' +\n        Buffer.from(response.data, 'binary').toString('base64') \n\n      this.image.processed = styledImageURL\n      this.isProcessed = true\n    }\n  },\n\n  watch: {\n    style () {\n      this.stylize()\n    }\n  }\n}\n</script>\n\n<style scoped>\nimg {\n  width: 100%;\n  height: auto;\n}\n\n.v-input {\n  font-size: 10px;\n}\n\n</style>\n"]}]}