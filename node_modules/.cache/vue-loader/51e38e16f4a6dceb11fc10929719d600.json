{"remainingRequest":"/Users/kimjngyun/sketch2art/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kimjngyun/sketch2art/src/components/ImageCard.vue?vue&type=style&index=0&id=4c1586be&scoped=true&lang=css&","dependencies":[{"path":"/Users/kimjngyun/sketch2art/src/components/ImageCard.vue","mtime":1619952461706},{"path":"/Users/kimjngyun/sketch2art/node_modules/css-loader/dist/cjs.js","mtime":1619073369298},{"path":"/Users/kimjngyun/sketch2art/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1619154896205},{"path":"/Users/kimjngyun/sketch2art/node_modules/postcss-loader/src/index.js","mtime":1619073370318},{"path":"/Users/kimjngyun/sketch2art/node_modules/cache-loader/dist/cjs.js","mtime":1619073328948},{"path":"/Users/kimjngyun/sketch2art/node_modules/vue-loader/lib/index.js","mtime":1619154896205}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi52LWlucHV0IHsKICBmb250LXNpemU6IDEwcHg7Cn0KI2ltYWdlIHsKICBoZWlnaHQ6IDUxMnB4OwogIHdpZHRoOiA1MTJweDsKICBib3JkZXI6IDJweCBzb2xpZCBibGFjazsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9Cgo="},{"version":3,"sources":["ImageCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ImageCard.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card elevation=\"0\">\n      <!-- <img v-if=\"!isProcessed\" :src=\"image.original\" /> -->\n      <img id=\"image\" v-if=\"!isProcessed\" src=\"../assets/1.jpg\" />\n      <img id=\"image\" v-else :src=\"image.processed\" />\n\n      <!-- <v-card-subtitle\n        v-if=\"!isProcessed\"\n        class=\"pb-0\"\n      >\n        Original Image\n      </v-card-subtitle>\n\n      <v-card-subtitle\n        v-else\n        class=\"pb-0\"\n      >\n      Styled Image with Style <b> \"{{ styleNames[style] }}\" </b>\n      </v-card-subtitle> -->\n      <v-card-text v-if=\"!isProcessed\">\n        Draw and Submit\n        <br/>\n        Press Change\n      </v-card-text>\n      <v-card-text v-else>\n        Translated Sketch!\n        <br/>\n        If you don't like, press change button!\n      </v-card-text>\n      <v-card-actions>\n        <v-btn text color=\"black\" outlined elevation=\"0\" @click=\"stylize\"> Change </v-btn>\n        <v-btn text color=\"black\" outlined elevation=\"0\" @click=\"submit\"> Submit </v-btn>\n      </v-card-actions>\n    </v-card>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'ImageCard',\n\n  props: {\n    image: Object\n  },\n\n  data: () => ({\n    isProcessed: false,\n    style: 10,\n    styles: ['original', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],\n    styleNames: ['candy', 'composition_7', 'feathers', 'la_muse', 'mosaic', 'rain', 'starry_night', 'the_scream', 'the_wave', 'udnie', 'random'] // TODO: RENAME\n  }),\n\n  methods: {\n    dataURLtoFile (dataURL, fileName) {\n      const arr = dataURL.split(',')\n      const mime = arr[0].match(/:(.*?);/)[1]\n      const bstr = atob(arr[1])\n      let n = bstr.length;\n      const u8arr = new Uint8Array(n)\n\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n)\n      }\n\n      return new File([u8arr], fileName, {type: mime})\n    },\n    submit () {\n\n    },\n    async stylize () {\n      if (this.style === -1) {\n        this.isProcessed = false\n        return\n      }\n      \n      // this.style = 10\n      // TODO: class에 loading 넣기 \n      const formData = new FormData()\n\n      formData.append('style', this.style)\n      formData.append('contentImage', this.dataURLtoFile(this.image.original, `styled_${this.style}`))\n\n      const baseURL = this.$store.getters.urlOf('styleTransferServer')\n      const apiURL = `${baseURL}/api/stylize`\n\n      const response = await axios.post(apiURL, formData, {\n        responseType: 'arraybuffer'\n      })\n      const styledImageURL =\n        'data:' +\n        response.headers['content-type'] +\n        ';base64,' +\n        Buffer.from(response.data, 'binary').toString('base64') \n\n      this.image.processed = styledImageURL\n      this.isProcessed = true\n    }\n  },\n\n  watch: {\n    style () {\n      this.stylize()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.v-input {\n  font-size: 10px;\n}\n#image {\n  height: 512px;\n  width: 512px;\n  border: 2px solid black;\n  border-radius: 10px;\n}\n\n</style>\n"]}]}