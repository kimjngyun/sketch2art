{"remainingRequest":"/Users/kimjngyun/frontend/sketch2art/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kimjngyun/frontend/sketch2art/src/components/mobileSketch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kimjngyun/frontend/sketch2art/src/components/mobileSketch.vue","mtime":1620157259711},{"path":"/Users/kimjngyun/frontend/sketch2art/node_modules/cache-loader/dist/cjs.js","mtime":1619073328948},{"path":"/Users/kimjngyun/frontend/sketch2art/node_modules/babel-loader/lib/index.js","mtime":1619154893880},{"path":"/Users/kimjngyun/frontend/sketch2art/node_modules/cache-loader/dist/cjs.js","mtime":1619073328948},{"path":"/Users/kimjngyun/frontend/sketch2art/node_modules/vue-loader/lib/index.js","mtime":1619154896205}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnCi8vIGltcG9ydCB7IG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdtb2JpbGVTa2V0Y2gnLAogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICBjYW52YXM6IG51bGwsCiAgICAgICAgY29udGV4dDogbnVsbCwKICAgICAgICBwcmV2aW91c1g6IDAsCiAgICAgICAgcHJldmlvdXNZOiAwLAogICAgICAgIGN1cnJlbnRYOiAwLAogICAgICAgIGN1cnJlbnRZOiAwLAogICAgICAgIG1vdXNlRG93bjogMCwKICAgICAgICBtb3VzZVg6IDAsCiAgICAgICAgbW91c2V5OiAwLAogICAgICAgIHRvdWNoWDogMCwKICAgICAgICB0b3VjaFk6IDAsCiAgICAgICAgcHJlc3Npbmc6IGZhbHNlLAogICAgICAgIHByZXNzZWRBdDogRGF0ZS5ub3coKSwKICAgICAgICBzaGFwZXM6IFtdLAogICAgICAgIGN1cnJuZXRTaGFwZTogW10sCiAgICAgICAgaW50ZXJ2YWxMYXN0UG9zaXRpb246IFstMSwgLTFdLAogICAgICAgIHJlYWRlcjogbmV3IEZpbGVSZWFkZXIoKSwKICAgICAgICBzdHJva2U6IDMsCiAgICB9KSwKICAgIHByb3A6IHsKICAgICAgICBpbWFnZTogT2JqZWN0CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC4uLm1hcEFjdGlvbnMoWydhZGROZXdJbWFnZSddKSwKICAgICAgICAuLi5tYXBBY3Rpb25zKFsncmVzZXRJbWFnZSddKSwKICAgICAgICBuZXdGaWxlICgpIHsKICAgICAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuZmlsZUlucHV0JykuZmlsZXMKICAgICAgICAgICAgY29uc3QgbmV3RmlsZSA9IGZpbGVzW2ZpbGVzLmxlbmd0aCAtIDFdCgogICAgICAgICAgICB0aGlzLnJlYWRlci5yZWFkQXNEYXRhVVJMKG5ld0ZpbGUpCiAgICAgICAgfSwKCiAgICAgICAgYXR0YWNoRmlsZSAoKSB7CiAgICAgICAgICAgIHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5maWxlSW5wdXQnKS5jbGljaygpCiAgICAgICAgfSwKCiAgICAgICAgY2FwdHVyZSAoKSB7CiAgICAgICAgICAgIHRoaXMucmVzZXRJbWFnZSgpCiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoImNhbnZhcyIpCiAgICAgICAgICAgIGNvbnN0IG5ld0ltYWdlID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIpOwoKICAgICAgICAgICAgdGhpcy5hZGROZXdJbWFnZShuZXdJbWFnZSkKCgogICAgICAgICAgICAvLyDshJzrsoQg7KCA7J6lIO2VmOuKlCDrtoDrtoQKICAgICAgICAgICAgY29uc3QgaW1nQmFzZTY0ID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsICdpbWFnZS9vY3RldC1zdHJlYW0nKTsKICAgICAgICAgICAgY29uc3QgZGVjb2RJbWcgPSBhdG9iKGltZ0Jhc2U2NC5zcGxpdCgnLCcpWzFdKTsgICAgICAgICAKICAgICAgICAgICAgbGV0IGFycmF5ID0gW107CgogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlY29kSW1nIC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgYXJyYXkucHVzaChkZWNvZEltZyAuY2hhckNvZGVBdChpKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBuZXcgQmxvYihbbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXSwge3R5cGU6ICdpbWFnZS9qcGVnJ30pOwogICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9ICdjYW52YXNfaW1nXycgKyBuZXcgRGF0ZSgpLmdldE1pbGxpc2Vjb25kcygpICsgJy5qcGcnOwogICAgICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSwgZmlsZU5hbWUpOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgYmFzZVVSTCA9IHRoaXMuJHN0b3JlLmdldHRlcnMudXJsT2YoJ3N0eWxlVHJhbnNmZXJTZXJ2ZXInKQogICAgICAgICAgICBjb25zdCBhcGlVUkwgPSBgJHtiYXNlVVJMfS9maWxlVXBsb2FkYAogICAgICAgICAgICBheGlvcy5wb3N0KGFwaVVSTCwgZm9ybURhdGEsIHsKICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJwogICAgICAgICAgICB9KQogICAgICAgICAgICBjb25zb2xlLmxvZygnQ2FwdHVyZWQnKQoKICAgICAgICAgICAgdGhpcy5pbWFnZS5zdWJtaXR0ZWQgPSB0cnVlCiAgICAgICAgfSwKICAgICAgICBlcmFzZUNhbnZhcyAoKSB7CiAgICAgICAgICAgIHRoaXMucmVzZXRJbWFnZSgpCiAgICAgICAgICAgIHRoaXMuc2hhcGVzID0gW10KICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KQogICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gIndoaXRlIgogICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCkKICAgICAgICAgICAgY29uc29sZS5sb2coJ2VyYXNlIHRoZSBjYW52YXMnKQogICAgICAgIH0sCgogICAgICAgIHByZXBhcmVOZXdTaGFwZSAoKSB7CiAgICAgICAgICAgIHRoaXMuY3VycmVudFNoYXBlID0gWwogICAgICAgICAgICAgICAgW10sCiAgICAgICAgICAgICAgICBbXSwKICAgICAgICAgICAgICAgIFtdCiAgICAgICAgICAgIF0KICAgICAgICB9LAogICAgICAgIHN0b3JlQ29vcmRpbmF0ZXMgKCkgewogICAgICAgICAgICBpZiAodGhpcy5pbnRlcnZhbExhc3RQb3NpdGlvblswXSAhPT0gdGhpcy5wcmV2aW91c1ggJiYKICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWxMYXN0UG9zaXRpb25bMV0gIT09IHRoaXMucHJldmlvdXNZKSB7CiAgICAgICAgICAgICAgICB0aGlzLmludGVydmFsTGFzdFBvc2l0aW9uID0gW3RoaXMucHJldmlvdXNYLCB0aGlzLnByZXZpb3VzWV0KICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNoYXBlWzBdLnB1c2godGhpcy5wcmV2aW91c1gpCiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTaGFwZVsxXS5wdXNoKHRoaXMucHJldmlvdXNZKQogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2hhcGVbMl0ucHVzaChEYXRlLm5vdygpIC0gdGhpcy5wcmVzc2VkQXQpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNvbW1pdEN1cnJlbnRTaGFwZSAoKSB7CiAgICAgICAgICAgIHRoaXMuc2hhcGVzLnB1c2godGhpcy5jdXJyZW50U2hhcGUpCiAgICAgICAgfSwKCiAgICAgICAgCiAgICAgICAgLy8g6re466as64qUIOu2gOu2hAogICAgICAgIGRyYXcgKGV2dCkgewogICAgICAgICAgICBsZXQgdGltZUludGVydmFsCiAgICAgICAgICAgIHN3aXRjaCAoZXZ0LnR5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ3BvaW50ZXJkb3duJzoKICAgICAgICAgICAgICAgIGNhc2UgJ21vdXNlZG93bic6CiAgICAgICAgICAgICAgICAgICAgdGltZUludGVydmFsID0gdGhpcy5kcmF3RG93bihldnQpCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImRvd24iKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICdwb2ludGVyY2FuY2xlJzoKICAgICAgICAgICAgICAgIGNhc2UgJ3RvdWNoY2FuY2xlJzoKICAgICAgICAgICAgICAgIGNhc2UgJ21vdXNlb3V0JzoKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJlc3NpbmcpIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lSW50ZXJ2YWwpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21taXRDdXJyZW50U2hhcGUoKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICdwb2ludGVydXAnOgogICAgICAgICAgICAgICAgY2FzZSAndG91Y2h1cCc6CiAgICAgICAgICAgICAgICBjYXNlICdtb3VzZXVwJzoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xlYXJpbmcgaW50ZXJ2YWwhJykKICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXNzaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVJbnRlcnZhbCkKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1pdEN1cnJlbnRTaGFwZSgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGNhc2UgJ3BvaW50ZXJtb3ZlJzoKICAgICAgICAgICAgICAgIGNhc2UgJ21vdXNlbW92ZSc6CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJlc3NpbmcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3TW92ZShldnQpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAvLyBjYXNlIGZvciB0b3VjaG1vdmUKICAgICAgICAgICAgICAgIGNhc2UgJ3RvdWNobW92ZSc6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3TW92ZShldnQpCiAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBhIHNjcm9sbGluZyBhY3Rpb24gYXMgYSByZXN1bHQgb2YgdGhpcyB0b3VjaG1vdmUgdHJpZ2dlcmluZy4KICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY2FzZSAndG91Y2hzdGFydCc6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3RG93bihldnQpCiAgICAgICAgICAgICAgICAgICAgdGltZUludGVydmFsID0gdGhpcy5kcmF3RG93bihldnQpCiAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudHMgYW4gYWRkaXRpb25hbCBtb3VzZWRvd24gZXZlbnQgYmVpbmcgdHJpZ2dlcmVkCiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBkcmF3RG93biAoZXZ0KSB7CiAgICAgICAgICAgIHRoaXMudXBkYXRlWFkoZXZ0KQogICAgICAgICAgICB0aGlzLnByZXNzaW5nID0gdHJ1ZQogICAgICAgICAgICB0aGlzLnByZXNzZWRBdCA9IERhdGUubm93KCkKCiAgICAgICAgICAgIHRoaXMucHJlcGFyZU5ld1NoYXBlKCkKCiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5zdG9yZUNvb3JkaW5hdGVzKCksIDkpCiAgICAgICAgfSwKICAgICAgICBkcmF3TW92ZSAoZXZ0KSB7CiAgICAgICAgICAgIGNvbnN0IGRyYXdTdHJva2UgPSB0aGlzLnN0cm9rZQogICAgICAgICAgICBjb25zdCBkcmF3Q29sb3IgPSAnYmxhY2snCiAgICAgICAgICAgIC8vIFRPRE86IG1ha2UgYSBjb25maWcgYW5kIHVzZSBpdC4KICAgICAgICAgICAgdGhpcy51cGRhdGVYWShldnQpCiAgICAgICAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKQogICAgICAgICAgICB0aGlzLmNvbnRleHQubW92ZVRvKHRoaXMucHJldmlvdXNYLCB0aGlzLnByZXZpb3VzWSkKICAgICAgICAgICAgdGhpcy5jb250ZXh0LmxpbmVUbyh0aGlzLmN1cnJlbnRYLCB0aGlzLmN1cnJlbnRZKQogICAgICAgICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSBkcmF3Q29sb3IKICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IGRyYXdDb2xvcgogICAgICAgICAgICB0aGlzLmNvbnRleHQubGluZUNhcCA9ICdyb3VuZCcKICAgICAgICAgICAgdGhpcy5jb250ZXh0LmxpbmVKb2luID0gJ3JvdW5kJwogICAgICAgICAgICB0aGlzLmNvbnRleHQubGluZVdpZHRoID0gZHJhd1N0cm9rZQogICAgICAgICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKCkKICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNsb3NlUGF0aCgpCiAgICAgICAgfSwKICAgICAgICB1cGRhdGVYWSAoZXZ0KSB7CiAgICAgICAgICAgIHRoaXMucHJldmlvdXNYID0gdGhpcy5jdXJyZW50WAogICAgICAgICAgICB0aGlzLnByZXZpb3VzWSA9IHRoaXMuY3VycmVudFkKCiAgICAgICAgICAgIGlmKGV2dC50YXJnZXRUb3VjaGVzKSB7CiAgICAgICAgICAgICAgICAvLyBQcmVmZXIgVG91Y2ggRXZlbnRzCiAgICAgICAgICAgICAgICB0aGlzLmdldFRvdWNoUG9zKGV2dCkKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFggPSB0aGlzLnRvdWNoWAogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50WSA9IHRoaXMudG91Y2hZCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmdldE1vdXNlUG9zKGV2dCkKICAgICAgICAgICAgICAgIC8vIEVpdGhlciBNb3VzZSBldmVudCBvciBQb2ludGVyIEV2ZW50CiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRYID0gdGhpcy5tb3VzZVgKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFkgPSB0aGlzLm1vdXNlWQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRYKQogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRZKQogICAgICAgIH0sCgogICAgICAgIGdldE1vdXNlUG9zIChldnQpIHsKICAgICAgICAgICAgaWYgKGV2dC5vZmZzZXRYKSB7CiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlWCA9IGV2dC5vZmZzZXRYOwogICAgICAgICAgICAgICAgdGhpcy5tb3VzZVkgPSBldnQub2Zmc2V0WTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChldnQubGF5ZXJYKSB7CiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlWCA9IGV2dC5sYXllclg7CiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlWSA9IGV2dC5sYXllclk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2coImdvdE1QIikKICAgICAgICB9LAoKICAgICAgICBnZXRUb3VjaFBvcyAoZXZ0KSB7CiAgICAgICAgICAgIGlmKGV2dC50b3VjaGVzKSB7CiAgICAgICAgICAgICAgICBpZiAoZXZ0LnRvdWNoZXMubGVuZ3RoID09IDEpIHsgLy8gT25seSBkZWFsIHdpdGggb25lIGZpbmdlcgogICAgICAgICAgICAgICAgICAgIHZhciB0b3VjaCA9IGV2dC50b3VjaGVzWzBdOyAvLyBHZXQgdGhlIGluZm9ybWF0aW9uIGZvciBmaW5nZXIgIzEKICAgICAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IGV2dC50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaFg9dG91Y2gucGFnZVgtcmVjdC54OwogICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hZPXRvdWNoLnBhZ2VZLXJlY3QueTsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0b3VjaC50YXJnZXQub2Zmc2V0TGVmdCwgdG91Y2gudGFyZ2V0Lm9mZnNldFRvcCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2coImdvdFRQIikKICAgICAgICAgICAgfQogICAgICAgIH0KCgoKICAgIC8vIEdldCB0aGUgdG91Y2ggcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHRvcC1sZWZ0IG9mIHRoZSBjYW52YXMKICAgIC8vIFdoZW4gd2UgZ2V0IHRoZSByYXcgdmFsdWVzIG9mIHBhZ2VYIGFuZCBwYWdlWSBiZWxvdywgdGhleSB0YWtlIGludG8gYWNjb3VudCB0aGUgc2Nyb2xsaW5nIG9uIHRoZSBwYWdlCiAgICAvLyBidXQgbm90IHRoZSBwb3NpdGlvbiByZWxhdGl2ZSB0byBvdXIgdGFyZ2V0IGRpdi4gV2UnbGwgYWRqdXN0IHRoZW0gdXNpbmcgInRhcmdldC5vZmZzZXRMZWZ0IiBhbmQKICAgIC8vICJ0YXJnZXQub2Zmc2V0VG9wIiB0byBnZXQgdGhlIGNvcnJlY3QgdmFsdWVzIGluIHJlbGF0aW9uIHRvIHRoZSB0b3AgbGVmdCBvZiB0aGUgY2FudmFzLgoKICAgIH0sCiAgICBtb3VudGVkICgpIHsKICAgICAgICB0aGlzLmNhbnZhcyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoImNhbnZhcyIpCiAgICAgICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKQoKCQl0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gIndoaXRlIgoJCXRoaXMuY29udGV4dC5maWxsUmVjdCgwLCAwLCA1MTIsIDUxMikKCiAgICAgICAgaWYgKHdpbmRvdy5Qb2ludGVyRXZlbnQpIHsKICAgICAgICAgICAgLy8gQWRkIFBvaW50ZXIgRXZlbnQgTGlzdGVuZXIKICAgICAgICAgICAgY29uc29sZS5sb2coInN1cHBvcnQgUG9pbnRlckV2ZW50IikKICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLmRyYXcpOwogICAgICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIHRoaXMuZHJhdyk7CiAgICAgICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIHRoaXMuZHJhdyk7CiAgICAgICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJjYW5jZWwnLCB0aGlzLmRyYXcpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBBZGQgVG91Y2ggTGlzdGVuZXIKICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuZHJhdyk7CiAgICAgICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuZHJhdyk7CiAgICAgICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5kcmF3KTsKICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCB0aGlzLmRyYXcpOwogICAgICAgIAogICAgICAgICAgICAvLyBBZGQgTW91c2UgTGlzdGVuZXIKICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5kcmF3KTsKICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5kcmF3KTsKICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuZHJhdyk7CiAgICAgICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlY291dCcsIHRoaXMuZHJhdyk7CiAgICAgICAgfQogICAgICAgIHRoaXMucmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuYWRkTmV3SW1hZ2UodGhpcy5yZWFkZXIucmVzdWx0KQogICAgICAgIH0pCiAgICB9Cn0K"},{"version":3,"sources":["mobileSketch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mobileSketch.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-layout class=\"univSketch\">\n        <v-card elevation=\"0\">\n            <canvas class=\"canvas\" id=\"sketchpad\" height=\"512\" width=\"512\">\n            </canvas>\n            <v-card-text>\n                제출하시면 스케치 이미지가 데이터셋으로 \n                <br>\n                사용될 수 있음에 동의하는 것으로 간주합니다.\n            </v-card-text>\n            \n            <v-card-actions>\n                <v-btn text color=\"black\" outlined elevation=\"0\" @click=\"eraseCanvas\">clear</v-btn>\n                <v-btn text color=\"black\" outlined elevation=\"0\" @click=\"capture\">submit</v-btn>\n            </v-card-actions>\n        </v-card>\n    </v-layout>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { mapActions } from 'vuex'\n// import { mapMutations } from 'vuex'\nexport default {\n    name: 'mobileSketch',\n    data: () => ({\n        canvas: null,\n        context: null,\n        previousX: 0,\n        previousY: 0,\n        currentX: 0,\n        currentY: 0,\n        mouseDown: 0,\n        mouseX: 0,\n        mousey: 0,\n        touchX: 0,\n        touchY: 0,\n        pressing: false,\n        pressedAt: Date.now(),\n        shapes: [],\n        currnetShape: [],\n        intervalLastPosition: [-1, -1],\n        reader: new FileReader(),\n        stroke: 3,\n    }),\n    prop: {\n        image: Object\n    },\n    methods: {\n        ...mapActions(['addNewImage']),\n        ...mapActions(['resetImage']),\n        newFile () {\n            const files = this.$el.querySelector('.fileInput').files\n            const newFile = files[files.length - 1]\n\n            this.reader.readAsDataURL(newFile)\n        },\n\n        attachFile () {\n            this.$el.querySelector('.fileInput').click()\n        },\n\n        capture () {\n            this.resetImage()\n            const canvas = this.$el.querySelector(\"canvas\")\n            const newImage = canvas.toDataURL(\"image/jpeg\");\n\n            this.addNewImage(newImage)\n\n\n            // 서버 저장 하는 부분\n            const imgBase64 = canvas.toDataURL('image/jpeg', 'image/octet-stream');\n            const decodImg = atob(imgBase64.split(',')[1]);         \n            let array = [];\n\n            for (let i = 0; i < decodImg .length; i++) {\n                array.push(decodImg .charCodeAt(i));\n            }\n\n            const file = new Blob([new Uint8Array(array)], {type: 'image/jpeg'});\n            const fileName = 'canvas_img_' + new Date().getMilliseconds() + '.jpg';\n            let formData = new FormData();\n            formData.append('file', file, fileName);\n            \n            const baseURL = this.$store.getters.urlOf('styleTransferServer')\n            const apiURL = `${baseURL}/fileUpload`\n            axios.post(apiURL, formData, {\n                responseType: 'arraybuffer'\n            })\n            console.log('Captured')\n\n            this.image.submitted = true\n        },\n        eraseCanvas () {\n            this.resetImage()\n            this.shapes = []\n            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n            this.context.fillStyle = \"white\"\n            this.context.fillRect(0, 0, this.canvas.width, this.canvas.height)\n            console.log('erase the canvas')\n        },\n\n        prepareNewShape () {\n            this.currentShape = [\n                [],\n                [],\n                []\n            ]\n        },\n        storeCoordinates () {\n            if (this.intervalLastPosition[0] !== this.previousX &&\n                this.intervalLastPosition[1] !== this.previousY) {\n                this.intervalLastPosition = [this.previousX, this.previousY]\n                this.currentShape[0].push(this.previousX)\n                this.currentShape[1].push(this.previousY)\n                this.currentShape[2].push(Date.now() - this.pressedAt)\n            }\n        },\n        commitCurrentShape () {\n            this.shapes.push(this.currentShape)\n        },\n\n        \n        // 그리는 부분\n        draw (evt) {\n            let timeInterval\n            switch (evt.type) {\n                case 'pointerdown':\n                case 'mousedown':\n                    timeInterval = this.drawDown(evt)\n                    console.log(\"down\")\n                    break\n                case 'pointercancle':\n                case 'touchcancle':\n                case 'mouseout':\n                    if (!this.pressing) break\n                    clearInterval(timeInterval)\n                    this.commitCurrentShape()\n                    break\n                case 'pointerup':\n                case 'touchup':\n                case 'mouseup':\n                    console.log('clearing interval!')\n                    this.pressing = false\n                    clearInterval(timeInterval)\n                    this.commitCurrentShape()\n                    break\n                case 'pointermove':\n                case 'mousemove':\n                    if (this.pressing) {\n                        this.drawMove(evt)\n                    }\n                    break\n                // case for touchmove\n                case 'touchmove':\n                    this.drawMove(evt)\n                    // Prevent a scrolling action as a result of this touchmove triggering.\n                    evt.preventDefault();\n                    break\n                case 'touchstart':\n                    this.drawDown(evt)\n                    timeInterval = this.drawDown(evt)\n                    // Prevents an additional mousedown event being triggered\n                    evt.preventDefault();\n                    break\n                \n            }\n        },\n        drawDown (evt) {\n            this.updateXY(evt)\n            this.pressing = true\n            this.pressedAt = Date.now()\n\n            this.prepareNewShape()\n\n            return window.setInterval(() => this.storeCoordinates(), 9)\n        },\n        drawMove (evt) {\n            const drawStroke = this.stroke\n            const drawColor = 'black'\n            // TODO: make a config and use it.\n            this.updateXY(evt)\n            this.context.beginPath()\n            this.context.moveTo(this.previousX, this.previousY)\n            this.context.lineTo(this.currentX, this.currentY)\n            this.context.strokeStyle = drawColor\n            this.context.fillStyle = drawColor\n            this.context.lineCap = 'round'\n            this.context.lineJoin = 'round'\n            this.context.lineWidth = drawStroke\n            this.context.stroke()\n            this.context.closePath()\n        },\n        updateXY (evt) {\n            this.previousX = this.currentX\n            this.previousY = this.currentY\n\n            if(evt.targetTouches) {\n                // Prefer Touch Events\n                this.getTouchPos(evt)\n                this.currentX = this.touchX\n                this.currentY = this.touchY\n            } else {\n                this.getMousePos(evt)\n                // Either Mouse event or Pointer Event\n                this.currentX = this.mouseX\n                this.currentY = this.mouseY\n            }\n            \n            console.log(this.currentX)\n            console.log(this.currentY)\n        },\n\n        getMousePos (evt) {\n            if (evt.offsetX) {\n                this.mouseX = evt.offsetX;\n                this.mouseY = evt.offsetY;\n            }\n            else if (evt.layerX) {\n                this.mouseX = evt.layerX;\n                this.mouseY = evt.layerY;\n            }\n            console.log(\"gotMP\")\n        },\n\n        getTouchPos (evt) {\n            if(evt.touches) {\n                if (evt.touches.length == 1) { // Only deal with one finger\n                    var touch = evt.touches[0]; // Get the information for finger #1\n                    var rect = evt.target.getBoundingClientRect();\n                    this.touchX=touch.pageX-rect.x;\n                    this.touchY=touch.pageY-rect.y;\n                    // console.log(touch.target.offsetLeft, touch.target.offsetTop)\n                }\n            console.log(\"gotTP\")\n            }\n        }\n\n\n\n    // Get the touch position relative to the top-left of the canvas\n    // When we get the raw values of pageX and pageY below, they take into account the scrolling on the page\n    // but not the position relative to our target div. We'll adjust them using \"target.offsetLeft\" and\n    // \"target.offsetTop\" to get the correct values in relation to the top left of the canvas.\n\n    },\n    mounted () {\n        this.canvas = this.$el.querySelector(\"canvas\")\n        this.context = this.canvas.getContext('2d')\n\n\t\tthis.context.fillStyle = \"white\"\n\t\tthis.context.fillRect(0, 0, 512, 512)\n\n        if (window.PointerEvent) {\n            // Add Pointer Event Listener\n            console.log(\"support PointerEvent\")\n            this.canvas.addEventListener('pointerdown', this.draw);\n            this.canvas.addEventListener('pointermove', this.draw);\n            this.canvas.addEventListener('pointerup', this.draw);\n            this.canvas.addEventListener('pointercancel', this.draw);\n            } else {\n            // Add Touch Listener\n            this.canvas.addEventListener('touchstart', this.draw);\n            this.canvas.addEventListener('touchmove', this.draw);\n            this.canvas.addEventListener('touchend', this.draw);\n            this.canvas.addEventListener('touchcancel', this.draw);\n        \n            // Add Mouse Listener\n            this.canvas.addEventListener('mousemove', this.draw);\n            this.canvas.addEventListener('mousedown', this.draw);\n            this.canvas.addEventListener('mouseup', this.draw);\n            this.canvas.addEventListener('mousecout', this.draw);\n        }\n        this.reader.addEventListener('load', () => {\n            this.addNewImage(this.reader.result)\n        })\n    }\n}\n</script>\n\n\n<style>\n/* Some CSS styling */\n.canvas {\n    touch-action: none;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n\n}\n#sketchpad {\n    height: 512px;\n    width: 512px;\n    border: 2px solid black;\n    border-radius: 10px;\n    position: relative; /* Necessary for correct mouse co-ords in Firefox */\n}\n</style>\n"]}]}